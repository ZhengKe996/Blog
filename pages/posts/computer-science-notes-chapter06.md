---
title: 第六章：计算机网络和因特网
# date: 2023-04-27
draft: true
type: ComputerScienceNotes
lang: zh
---

## 知识点

![知识点](/public/images/computer-science-notes/6.1.png)
![知识点](/public/images/computer-science-notes/6.2.png)

### 基础概念

- 局域网：将主机连接起来的私有网络
- 广域网：将交换机或路由器等连接起来的网络。其比局域网覆盖范围更大
- 互联网：通过局域网和广域网将设备连起来构成的互联网络，或者说是网际网
- 因特网：目前最大的互联网络。由骨干网，因特网服务供应商网络（ISP）和客户网络三级组成。

### 协议分层

1. 首先，互联网之间的信息传递密文的，需要通过双方约定好传输格式以及其他细则之后就可以通过传二进制数据的方式来互传信息了，这个约定好的东西就是协议。

2. 协议分层指的是不只靠一个协议而是通过多个协议将信息一层层加密/解密。每一层的协议的关注点都是不同的，例如说有的协议关注数据的完整校验，有的协议关注数据的信息加密，有的协议关注数据如何转化为物理信号等。模块化思想。

3. 协议层之间可以忽略掉更底层的协议而看作是直接连接的（就结果而言看起来的确很像是直接连接的），例如从最终效果上看，网络连接的确就是可以将明文传输过去的。这种假想的连接叫做逻辑连接。

协议分层的两个原则是：

- 每个协议层都可以做两个对立的工作，例如说加密和解密，发送和接收等
- 在通信的两端中，两个协议层之间的产物一定要格式一样的，例如说电子数据，密文，明文等

### TCP/IP 协议族

TCP/IP 协议族采用五层分层方式，自上而下分别是应用层，传输层，网络层，数据链路层和物理层。

一般源和目标会涉及到这五层的加密和解析，而作为中间件的交换机（只有两层）和路由器（只有三层）则不会有完整的五层加密解密（因为他们不需要关注太多的上层信息）。

地址：不管是在哪一层我们都需要一个地址才能知道对方的对应层的地址

- 在应用层下，我们需要知道对方的名称，例如说邮箱，网址，或者请求串等
- 在传输层下，我们需要知道对方的端口号
- 在网络层下，我们需要知道对方的逻辑地址（一般就是 IP 地址）
- 在数据链路层下，我们需要知道对方的链路层地址（也就是 MAC 地址）
- 在物理层下的传输数据单位是位，故不需要也无法使用地址，传就是了

### 应用层

应用层模式需要解决的问题就是，在已知机器可以连接的情况下，机器之间应该如何交互。

两种模式：C/S 模式和 P2P 模式。

- C/S 模式：客户端-服务端模式。两台机器的交互借由中间的服务端机器完成。
- P2P 模式：端对端模式。两台机器直接交互。

**应用层程序列举**

- 万维网/超文本传输协议：超文本传输协议（HTTP）。其默认使用 80 端口。
- 文件传输协议：FTP，其通过 FTP 服务器实现文件的上传/下载。控制连接和数据传输连接。控制连接会在整个 FTP 会话中一直处于开启状态，而数据传输连接只会在收到上传/下载命令时才开启，并在文件传输结束后关闭。命令和数据分开传输使得其效率上升。
- 电子邮件：收发电子邮件同样需要依靠服务器。
- TELNET：ELNET 协议用于用户从客户端直接登录目标服务端并对其操作，也就是远程登录。因为不安全被 SSH 代替
- 安全外壳（SSH）：更安全的远程登录协议。SSH 有两个版本：SSH-1 和 SSH-2，SSH-1 已经因为其安全漏洞被弃用，现在用的是 SSH-2。
- 域名系统（DNS）：可以理解为给用户可以用域名换目标 IP 的系统。其本质就是一系列的 DNS 服务器。既包括本地的 DNS 缓存，也包括远程的根据命名空间区分的 DNS 服务器。

### 传输层

传输层位于应用层和网络层之间，也是 TCP/IP 协议族的核心部分。严格地讲，在传输层的层面上不是两台机器进行通信，而是两个进程进行远程通信。网络层负责把数据送到对应的机器，但是至于数据要给哪个进程，这就是传输层协议的工作了。
**传输层协议：UDP 和 TCP**

- 用户数据报协议（UDP）：这个协议仅仅是给要发送的数据加个头而已。无连接的不可靠协议，但其相对 TCP 而言更加轻量级，其极其简单且开销很低，很适合用于信息实时同步等场景。UDP 发送的包也叫做用户数据报

- 传输控制协议（TCP）：TCP 是一个面向连接的可靠协议。它的头包含更多的数据，其也有着一套复杂的传输控制规则。TCP 发送的包也叫做段。

### 网络层

对于网络层而言，数据的传输就是机器对机器的传输。包括任何带 IP 地址的机器，例如电脑或路由。网络层需要根据其使用的协议对数据再加一个头，包含一些传输需要的信息。

其数据包的传输有如下特点：

- 不可靠传递：其传输过程中的任何损坏，丢失，重复，都不归网络层管。
- 无连接传递：就只是将包扔给目标（更准确的说是下一站）。
- 不保证顺序：由于传输途中一般不会只有一条路径，故从源机器发送的多个数据包到目标机器的顺序很可能不会是原来的顺序（有的走的快有的走的慢）。将乱序的数据包组合起来是传输层的工作。

### 网络层协议

有 IPv4 和 IPv6 两个。其主要区别也就是地址格式不同，以及因此带来的数据包的头部不同。

### 数据链路层

数据链路层是节点对节点的连接。其数据的传输单位为帧，可以理解为将切分后的数据再加个头和尾。数据链路层的数据传输会经过局域网（LAN）和广域网（WAN）。

### 物理层

传输的单位是位，也就是最原始的逻辑数据。数据以信号表示，模拟信号和数字信号。模拟信号更像是波的信号，属于连续的信息，而数字信号的信息则是离散的。传输：数字化传输和模拟传输。

- 数字化传输：传输信号为数字信号的传输。其可以是数数转换（数位转换为数字信号传输），或者是模数转换（模拟信号采样形成数位，数位转换为数字信号，到目标时再将数位连接回模拟信号）。
- 模拟传输：传输信号位模拟信号的传输。其可以是数模转换（数位转换为模拟信号传输），或者是模模转换（将模拟信号转换成更加有利于传输的模拟信号）

**物理层的传输介质：**可分为导向介质和非导向介质两种。

- 导向介质：有提供导向性物理通道的介质。如：双绞线，同轴电缆，光纤电缆。
- 非导向介质：无线传输。如：无线电波，微波或红外波进行在空气等非导向介质中传播。
