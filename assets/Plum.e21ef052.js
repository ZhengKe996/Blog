import{d as T,r as u,q as E,s as W,g as $,v as q,i as F,a as N,o as V}from"./app.3f8a0e8e.js";const j={class:"fixed top-0 bottom-0 left-0 right-0 pointer-events-none",style:{"z-index":"-1"}},A="#88888825",J=T({__name:"Plum",setup(D){const S=Math.PI,g=Math.PI/2,w=Math.PI/12,x=u(null),{random:i}=Math,n=E(W()),v=u(()=>{}),_=u(4),y=u(6),k=u(!1);function B(s,e=400,c=400,r){const t=s.getContext("2d"),a=window.devicePixelRatio||1,l=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,o=r||a/l;return s.style.width=`${e}px`,s.style.height=`${c}px`,s.width=o*e,s.height=o*c,t.scale(o,o),{ctx:t,dpi:o}}function M(s=0,e=0,c=0,r=0){const t=c*Math.cos(r),a=c*Math.sin(r);return[s+t,e+a]}return $(async()=>{const s=x.value,{ctx:e}=B(s,n.width,n.height),{width:c,height:r}=s;let t=[],a=[],l=0;const o=(f,R,m)=>{const z=i()*y.value,[h,d]=M(f,R,z,m);e.beginPath(),e.moveTo(f,R),e.lineTo(h,d),e.stroke();const C=m+i()*w,I=m-i()*w;h<-100||h>n.width+100||d<-100||d>n.height+100||((l<=_.value||i()>.5)&&t.push(()=>o(h,d,C)),(l<=_.value||i()>.5)&&t.push(()=>o(h,d,I)))};let P=performance.now();const b=1e3/40;let p;p=q(()=>{performance.now()-P<b||(l+=1,a=t,t=[],P=performance.now(),a.length||(p.pause(),k.value=!0),a.forEach(f=>f()))},{immediate:!1}),v.value=()=>{p.pause(),l=0,e.clearRect(0,0,c,r),e.lineWidth=1,e.strokeStyle=A,a=[],t=[()=>o(i()*n.width,0,g),()=>o(i()*n.width,n.height,-g),()=>o(0,i()*n.height,0),()=>o(n.width,i()*n.height,S)],n.width<500&&(t=t.slice(0,2)),p.resume(),k.value=!1},v.value()}),(s,e)=>(V(),F("div",j,[N("canvas",{ref_key:"el",ref:x,width:"400",height:"400"},null,512)]))}});export{J as _};
